<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>æ‰‹æœºç«¯è°ƒè¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
            padding: 20px;
            margin: 0;
        }
        .debug-info {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }
        .status {
            padding: 5px 0;
        }
        .success { color: #4CAF50; }
        .error { color: #ff4444; }
        .warning { color: #ff9800; }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 5px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ GitHub Pages ç§»åŠ¨ç«¯è°ƒè¯•</h1>
    
    <div class="debug-info">
        <h3>ğŸ“± è®¾å¤‡ä¿¡æ¯</h3>
        <div class="status">ç”¨æˆ·ä»£ç†: <span id="userAgent"></span></div>
        <div class="status">å±å¹•å°ºå¯¸: <span id="screenInfo"></span></div>
        <div class="status">è§†å£å°ºå¯¸: <span id="viewportInfo"></span></div>
        <div class="status">è®¾å¤‡åƒç´ æ¯”: <span id="pixelRatio"></span></div>
    </div>

    <div class="debug-info">
        <h3>ğŸŒ ç½‘ç»œå’Œä½ç½®ä¿¡æ¯</h3>
        <div class="status">å½“å‰URL: <span id="currentUrl"></span></div>
        <div class="status">åè®®: <span id="protocol"></span></div>
        <div class="status">ä¸»æœº: <span id="hostname"></span></div>
    </div>

    <div class="debug-info">
        <h3>ğŸ” JavaScript API æ£€æµ‹</h3>
        <div class="status">Canvas API: <span id="canvasSupport"></span></div>
        <div class="status">Touch Events: <span id="touchSupport"></span></div>
        <div class="status">Local Storage: <span id="storageSupport"></span></div>
        <div class="status">Geolocation: <span id="geoSupport"></span></div>
    </div>

    <div class="debug-info">
        <h3>ğŸ“ èµ„æºåŠ è½½æµ‹è¯•</h3>
        <div class="status">CSS æ–‡ä»¶: <span id="cssStatus">æ£€æµ‹ä¸­...</span></div>
        <div class="status">JS æ–‡ä»¶: <span id="jsStatus">æ£€æµ‹ä¸­...</span></div>
    </div>

    <div class="debug-info">
        <h3>âš¡ æ“ä½œæµ‹è¯•</h3>
        <button onclick="testTouch()">æµ‹è¯•è§¦æ‘¸</button>
        <button onclick="testCanvas()">æµ‹è¯•Canvas</button>
        <button onclick="goToMainGame()">æ‰“å¼€ä¸»æ¸¸æˆ</button>
        <div class="status" id="testResults">ç­‰å¾…æµ‹è¯•...</div>
    </div>

    <canvas id="testCanvas" width="200" height="100" style="border: 1px solid #4CAF50; margin: 10px 0;"></canvas>

    <script>
        // è®¾å¤‡ä¿¡æ¯æ£€æµ‹
        function detectDeviceInfo() {
            document.getElementById('userAgent').textContent = navigator.userAgent;
            document.getElementById('screenInfo').textContent = `${screen.width} Ã— ${screen.height}`;
            document.getElementById('viewportInfo').textContent = `${window.innerWidth} Ã— ${window.innerHeight}`;
            document.getElementById('pixelRatio').textContent = window.devicePixelRatio || 'æœªçŸ¥';
            
            document.getElementById('currentUrl').textContent = window.location.href;
            document.getElementById('protocol').textContent = window.location.protocol;
            document.getElementById('hostname').textContent = window.location.hostname;
        }

        // API æ”¯æŒæ£€æµ‹
        function detectAPISupport() {
            // Canvas
            const canvas = document.createElement('canvas');
            const canvasSupported = canvas.getContext && canvas.getContext('2d');
            document.getElementById('canvasSupport').innerHTML = canvasSupported ? 
                '<span class="success">âœ… æ”¯æŒ</span>' : '<span class="error">âŒ ä¸æ”¯æŒ</span>';

            // Touch Events
            const touchSupported = 'ontouchstart' in window;
            document.getElementById('touchSupport').innerHTML = touchSupported ? 
                '<span class="success">âœ… æ”¯æŒ</span>' : '<span class="warning">âš ï¸ ä¸æ”¯æŒ</span>';

            // Local Storage
            const storageSupported = typeof(Storage) !== "undefined";
            document.getElementById('storageSupport').innerHTML = storageSupported ? 
                '<span class="success">âœ… æ”¯æŒ</span>' : '<span class="error">âŒ ä¸æ”¯æŒ</span>';

            // Geolocation
            const geoSupported = "geolocation" in navigator;
            document.getElementById('geoSupport').innerHTML = geoSupported ? 
                '<span class="success">âœ… æ”¯æŒ</span>' : '<span class="warning">âš ï¸ ä¸æ”¯æŒ</span>';
        }

        // èµ„æºåŠ è½½æµ‹è¯•
        function testResourceLoading() {
            // æµ‹è¯• CSS
            const link = document.createElement('link');
            link.rel = 'stylesheet';
            link.href = './style.css';
            link.onload = () => {
                document.getElementById('cssStatus').innerHTML = '<span class="success">âœ… åŠ è½½æˆåŠŸ</span>';
            };
            link.onerror = () => {
                document.getElementById('cssStatus').innerHTML = '<span class="error">âŒ åŠ è½½å¤±è´¥</span>';
            };
            document.head.appendChild(link);

            // æµ‹è¯• JS
            const script = document.createElement('script');
            script.src = './script.js';
            script.onload = () => {
                document.getElementById('jsStatus').innerHTML = '<span class="success">âœ… åŠ è½½æˆåŠŸ</span>';
            };
            script.onerror = () => {
                document.getElementById('jsStatus').innerHTML = '<span class="error">âŒ åŠ è½½å¤±è´¥</span>';
            };
            document.head.appendChild(script);
        }

        // è§¦æ‘¸æµ‹è¯•
        function testTouch() {
            document.getElementById('testResults').innerHTML = 'ğŸ‘† è¯·è§¦æ‘¸å±å¹•æµ‹è¯•...';
            
            let touchDetected = false;
            const testElement = document.body;
            
            const handleTouch = (e) => {
                touchDetected = true;
                const x = e.touches ? e.touches[0].clientX : e.clientX;
                const y = e.touches ? e.touches[0].clientY : e.clientY;
                document.getElementById('testResults').innerHTML = 
                    `<span class="success">âœ… è§¦æ‘¸æˆåŠŸï¼åæ ‡: (${Math.round(x)}, ${Math.round(y)})</span>`;
                
                testElement.removeEventListener('touchstart', handleTouch);
                testElement.removeEventListener('click', handleTouch);
            };
            
            testElement.addEventListener('touchstart', handleTouch, { passive: false });
            testElement.addEventListener('click', handleTouch);
            
            setTimeout(() => {
                if (!touchDetected) {
                    document.getElementById('testResults').innerHTML = 
                        '<span class="error">âŒ è§¦æ‘¸æµ‹è¯•è¶…æ—¶</span>';
                }
            }, 5000);
        }

        // Canvasæµ‹è¯•
        function testCanvas() {
            const canvas = document.getElementById('testCanvas');
            const ctx = canvas.getContext('2d');
            
            try {
                ctx.fillStyle = '#4CAF50';
                ctx.fillRect(10, 10, 80, 80);
                ctx.fillStyle = '#ff4444';
                ctx.beginPath();
                ctx.arc(50, 50, 20, 0, Math.PI * 2);
                ctx.fill();
                
                document.getElementById('testResults').innerHTML = 
                    '<span class="success">âœ… Canvasæ¸²æŸ“æˆåŠŸï¼</span>';
            } catch (error) {
                document.getElementById('testResults').innerHTML = 
                    `<span class="error">âŒ Canvasé”™è¯¯: ${error.message}</span>`;
            }
        }

        // è·³è½¬åˆ°ä¸»æ¸¸æˆ
        function goToMainGame() {
            window.location.href = './index.html';
        }

        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œæ£€æµ‹
        window.onload = function() {
            detectDeviceInfo();
            detectAPISupport();
            testResourceLoading();
            
            // è‡ªåŠ¨è¿›è¡ŒCanvasæµ‹è¯•
            setTimeout(testCanvas, 1000);
        };
    </script>
</body>
</html>
